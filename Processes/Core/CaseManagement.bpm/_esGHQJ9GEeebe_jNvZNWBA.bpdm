<bpel:process xmlns:bpdm="http://www.intalio/designer/business-process-data-modeling" xmlns:mapper="http://www.intalio.com/designer/mapper" xmlns:tns="http://www.example.org/Launchpoint" xmlns:Database="http://thisdiagram/Database" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:CheckCaseExistance-process="http://thisproject/Processes/Integrations/CheckCaseExistance/process" xmlns:this="http://thisdiagram/Case_Manager" xmlns:Case_evaluator="http://thisdiagram/Case_evaluator" xmlns:diag="http://thisdiagram" xmlns:BusinessRule="http://www.example.org/NewXMLSchema" xmlns:customVariable="http://everteam.com/xvar/example" xmlns:CaseEvaluator-process="http://thisproject/Processes/Core/CaseEvaluator/process" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:metrics="http://test.com/xvar/example" xmlns:Queue_Service="http://thisdiagram/Queue_Service" xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:pnlk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ode="http://www.apache.org/ode/type/extension" targetNamespace="http://thisdiagram/Case_Manager">
    <bpdm:dependencies version="6000089">
        <bpdm:namespaceDefinition bpdm:uri="http://www.example.org/Launchpoint" bpdm:prefix="tns" bpdm:comment="contrib=&apos;project:///Schemas/Launchpoint.xsd"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisdiagram/Database" bpdm:prefix="Database" bpdm:comment="contrib=&apos;partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://www.w3.org/2001/XMLSchema" bpdm:prefix="xs"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisproject/Processes/Integrations/CheckCaseExistance/process" bpdm:prefix="CheckCaseExistance-process" bpdm:comment="contrib=&apos;project:///Processes/Integrations/CheckCaseExistance-process.wsdl"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisdiagram/Case_Manager" bpdm:prefix="this" bpdm:type="this_process"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisdiagram/Case_evaluator" bpdm:prefix="Case_evaluator" bpdm:comment="contrib=&apos;partner-pool:///_a8askNHzEeegkeOYmwRRMQ"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisdiagram" bpdm:prefix="diag" bpdm:comment="contrib=&apos;partner-pool:///_esGHQJ9GEeebe_jNvZNWBAimplicitPartner"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://www.example.org/NewXMLSchema" bpdm:prefix="BusinessRule" bpdm:comment="contrib=&apos;project:///Schemas/BusinessRule.xsd"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://everteam.com/xvar/example" bpdm:prefix="customVariable" bpdm:comment="contrib=&apos;project:///IntalioObjects/customVariable.xvar"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisproject/Processes/Core/CaseEvaluator/process" bpdm:prefix="CaseEvaluator-process" bpdm:comment="contrib=&apos;project:///Processes/Core/CaseEvaluator-process.wsdl"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://www.w3.org/XML/1998/namespace" bpdm:prefix="xml"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://www.w3.org/2001/XMLSchema-instance" bpdm:prefix="xsi"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://test.com/xvar/example" bpdm:prefix="metrics" bpdm:comment="contrib=&apos;project:///Metrics/metrics.xvar"></bpdm:namespaceDefinition>
        <bpdm:namespaceDefinition bpdm:uri="http://thisdiagram/Queue_Service" bpdm:prefix="Queue_Service" bpdm:comment="contrib=&apos;partner-pool:///_G9knAJ9HEeebe_jNvZNWBA"></bpdm:namespaceDefinition>
        <bpdm:namespaceContributor bpdm:url="thisprocess://this-process-types" bpdm:label="process defined this-process-types">
            <vprop:property name="caseid" type="xs:string"/>
            <wsdl:portType name="ForDatabase">
                <wsdl:operation name="Receive_results" bpdm:source="partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug">
                    <wsdl:input message="this:Receive_resultsRequest" name="Receive_results"/>
                    <wsdl:output message="this:Receive_resultsResponse" name="Receive_resultsResponse"/>
                </wsdl:operation>
            </wsdl:portType>
            <bpel:binding name="CanonicBindingForDatabase" type="this:ForDatabase" bpdm:isSynchronized="true"/>
            <wsdl:portType name="ForQueue_Service">
                <wsdl:operation name="Read_case_batch" bpdm:source="partner-pool:///_G9knAJ9HEeebe_jNvZNWBA">
                    <wsdl:input message="this:Read_case_batchRequest" name="Read_case_batch"/>
                    <wsdl:output message="this:Read_case_batchResponse" name="Read_case_batchResponse"/>
                </wsdl:operation>
            </wsdl:portType>
            <bpel:binding name="CanonicBindingForQueue_Service" type="this:ForQueue_Service" bpdm:isSynchronized="true"/>
            <xs:element name="Receive_resultsRequest" type="tns:CaseExistanceType" bpdm:source="partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug"/>
            <wsdl:message name="Receive_resultsRequest" bpdm:source="partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug">
                <wsdl:part name="body" element="this:Receive_resultsRequest"/>
            </wsdl:message>
            <xs:element name="Receive_resultsResponse" type="tns:BpmAckType" bpdm:source="partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug"/>
            <wsdl:message name="Receive_resultsResponse" bpdm:source="partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug">
                <wsdl:part name="body" element="this:Receive_resultsResponse"/>
            </wsdl:message>
            <xs:element name="Read_case_batchRequest" type="tns:BatchType" bpdm:source="partner-pool:///_G9knAJ9HEeebe_jNvZNWBA"/>
            <wsdl:message name="Read_case_batchRequest" bpdm:source="partner-pool:///_G9knAJ9HEeebe_jNvZNWBA">
                <wsdl:part name="body" element="this:Read_case_batchRequest"/>
            </wsdl:message>
            <xs:element name="Read_case_batchResponse" type="tns:BpmAckType" bpdm:source="partner-pool:///_G9knAJ9HEeebe_jNvZNWBA"/>
            <wsdl:message name="Read_case_batchResponse" bpdm:source="partner-pool:///_G9knAJ9HEeebe_jNvZNWBA">
                <wsdl:part name="body" element="this:Read_case_batchResponse"/>
            </wsdl:message>
            <vprop:propertyAlias propertyName="this:caseid" messageType="CheckCaseExistance-process:Receive_caseRequest" part="body">
                <vprop:query>text()</vprop:query>
            </vprop:propertyAlias>
            <vprop:propertyAlias propertyName="this:caseid" messageType="this:Receive_resultsRequest" part="body">
                <vprop:query>tns:caseid/text()</vprop:query>
            </vprop:propertyAlias>
        </bpdm:namespaceContributor>
        <bpdm:namespaceContributor bpdm:url="partner-pool:///_Vt5hoNHlEeepF8B7W_A3ug" bpdm:label="Database"/>
        <bpdm:namespaceContributor bpdm:url="partner-pool:///_G9knAJ9HEeebe_jNvZNWBA" bpdm:label="Queue Service"/>
        <bpdm:namespaceContributor bpdm:url="partner-pool:///_a8askNHzEeegkeOYmwRRMQ" bpdm:label="Case evaluator"/>
        <bpdm:namespaceContributor bpdm:url="project:///Schemas/Launchpoint.xsd"/>
        <bpdm:namespaceContributor bpdm:url="project:///Processes/Integrations/CheckCaseExistance-process.wsdl"/>
        <bpdm:namespaceContributor bpdm:url="project:///Processes/Core/CaseEvaluator-process.wsdl"/>
        <bpdm:namespaceContributor bpdm:url="project:///Schemas/BusinessRule.xsd"/>
        <bpdm:namespaceContributor bpdm:url="project:///Metrics/metrics.xvar"/>
        <bpdm:namespaceContributor bpdm:url="project:///Metrics/metrics.xvar.xsd"/>
        <bpdm:namespaceContributor bpdm:url="project:///IntalioObjects/customVariable.xvar"/>
        <bpdm:namespaceContributor bpdm:url="project:///IntalioObjects/customVariable.xvar.xsd"/>
    </bpdm:dependencies>
    <bpel:scope bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Case Manager" bpdm:ID="_esGHQJ9GEeebe_jNvZNWBA">
        <bpel:partnerLinks>
            <bpel:partnerLink name="case_ManagerAndQueue_ServicePlkVar" partnerLinkType="diag:Case_ManagerAndQueue_Service" myRole="Case_Manager_for_Queue_Service" bpdm:enableSharing="false" bpdm:providedService="this:CanonicServiceForQueue_Service" bpdm:providedPort="canonicPort" bpdm:provideSOAPAddress="${deploy_serverUrl}${deploy_baseSoapServicesUrl}/${deploy_bundleNcName}/${diagram_relativeURL}/Case_Manager/Queue_Service" bpdm:providedIsDefault="true" bpdm:clientTasks="_esGHQJ9GEeebe_jNvZNWBA:_nBTX4J-4Eeee0o7jDg0-OQ" bpdm:isManaged="true" bpdm:otherPoolId="_G9knAJ9HEeebe_jNvZNWBA"/>
            <bpel:partnerLink name="case_ManagerAndDatabaseForCanonicPortPlkVar" partnerLinkType="diag:Case_ManagerAndDatabaseForCanonicPortPlk" initializePartnerRole="yes" myRole="Case_Manager_for_Database" bpdm:enableSharing="false" bpdm:providedService="this:CanonicServiceForDatabase" bpdm:providedPort="canonicPort" bpdm:provideSOAPAddress="${deploy_serverUrl}${deploy_baseSoapServicesUrl}/${deploy_bundleNcName}/${diagram_relativeURL}/Case_Manager/Database" bpdm:providedIsDefault="true" partnerRole="Database_for_Case_Manager" bpdm:invokedService="CheckCaseExistance-process:CanonicServiceForclient" bpdm:invokedPort="canonicPort" bpdm:invokedSOAPAddress="epr" bpdm:invokedIsDefault="true" bpdm:clientTasks="_jVr7ENHnEeepF8B7W_A3ug:_jjoiYNHlEeepF8B7W_A3ug, _jVr7ENHnEeepF8B7W_A3ug:_Hg07MM8BEeecbIAlY2LAug" bpdm:isManaged="true" bpdm:otherPoolId="_Vt5hoNHlEeepF8B7W_A3ug"/>
            <bpel:partnerLink name="case_ManagerAndCase_evaluatorForCanonicPortPlkVar" partnerLinkType="diag:Case_ManagerAndCase_evaluatorForCanonicPortPlk" initializePartnerRole="yes" partnerRole="Case_evaluator_for_Case_Manager" bpdm:invokedService="CaseEvaluator-process:CanonicServiceForclient" bpdm:invokedPort="canonicPort" bpdm:invokedSOAPAddress="epr" bpdm:invokedIsDefault="true" bpdm:clientTasks="_SRGm4M8BEeecbIAlY2LAug:_lRSOoNHzEeegkeOYmwRRMQ" bpdm:isManaged="true" bpdm:otherPoolId="_a8askNHzEeegkeOYmwRRMQ"/>
        </bpel:partnerLinks>
        <bpel:variables xmlns:xvar="http://ode.apache.org/externalVariables">
            <bpel:variable name="customVariable" element="customVariable:customVariable" xvar:id="customVariable-_es-4EJ9GEeebe_jNvZNWBA" xvar:relates-to="customVariable-keys" bpdm:xvarType="customVariable:customVariable" bpdm:id="_es-4EJ9GEeebe_jNvZNWBA"/>
            <bpel:variable name="thisRead_case_batchResponse2Msg" messageType="this:Read_case_batchResponse" bpdm:id="_OQJkQMmuEeea1ay7b7CFuw" bpdm:messageIds=" out:_OPxw0MmuEeea1ay7b7CFuw">
                <bpel:from bpdm:toPart="body">
                    <bpel:literal bpdm:linkedMessageType="this:Read_case_batchResponse" bpdm:linkedPart="body"></bpel:literal>
                </bpel:from>
            </bpel:variable>
            <bpel:variable name="case_ManagerRead_case_batchRequest1Msg" messageType="this:Read_case_batchRequest" bpdm:id="_9WDDwKISEeeW6fy7N0wOvg" bpdm:messageIds="inc:_9VylEKISEeeW6fy7N0wOvg"/>
            <bpel:variable name="BatchTracking" element="metrics:BatchTracking" xvar:id="BatchTracking-_ieIIcdLNEeeydOmcLap9Ow" xvar:relates-to="BatchTracking-keys" bpdm:xvarType="metrics:BatchTracking" bpdm:id="_ieIIcdLNEeeydOmcLap9Ow"/>
        </bpel:variables>
        <bpel:sequence>
            <bpdm:messagingtask eventType="start: message" operation="Read_case_batch" partnerLink="case_ManagerAndQueue_ServicePlkVar" portType="this:ForQueue_Service" isMyRole="true" enableSharing="false" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Read case batch" bpdm:ID="_nBTX4J-4Eeee0o7jDg0-OQ" bpdm:isHeaderAuthorizationAware="yes">
                <bpdm:linkset bpdm:type="incomingMessage" bpdm:bpeltype="receive" bpdm:messageVariable="case_ManagerRead_case_batchRequest1Msg" bpdm:msgVarScopeId="_esGHQJ9GEeebe_jNvZNWBA" bpdm:variableIsManaged="true" bpdm:messageType="this:Read_case_batchRequest" bpdm:isHeaderAuthorizationAware="yes" bpdm:ID="_9VylEKISEeeW6fy7N0wOvg"></bpdm:linkset>
                <bpdm:linkset bpdm:type="assignments">
                    <bpel:copy>
                        <bpel:from>$ode:pid</bpel:from>
                        <bpel:to>$thisRead_case_batchResponse2Msg.body/tns:pid</bpel:to><mapper:mapperLink><mapper:vertice id="1124270935" targetPath="$thisRead_case_batchResponse2Msg.body/tns:pid" targetedBy="1338474261-arg0"></mapper:vertice><mapper:vertice id="1338474261" sourcePath="$ode:pid"></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>current-dateTime()</bpel:from>
                        <bpel:to>$thisRead_case_batchResponse2Msg.body/tns:timestamp</bpel:to><mapper:mapperLink><mapper:vertice id="1689466120" targetPath="$thisRead_case_batchResponse2Msg.body/tns:timestamp" targetedBy="1523298436-arg0"></mapper:vertice><mapper:vertice id="1523298436" dimension="109x24" location="456,168"><mapper:value>current-dateTime()</mapper:value></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                </bpdm:linkset>
                <bpdm:linkset bpdm:type="outgoingMessage" bpdm:bpeltype="reply" bpdm:messageVariable="thisRead_case_batchResponse2Msg" bpdm:msgVarScopeId="_esGHQJ9GEeebe_jNvZNWBA" bpdm:variableIsManaged="true" bpdm:messageType="this:Read_case_batchResponse" bpdm:isHeaderAuthorizationAware="yes" bpdm:ID="_OPxw0MmuEeea1ay7b7CFuw"></bpdm:linkset>
            </bpdm:messagingtask>
            <bpdm:messagingtask eventType="intermediate: empty" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Empty_Intermediate_Event" bpdm:ID="_j-sjUNLNEeeydOmcLap9Ow" bpdm:isHeaderAuthorizationAware="no">
                <bpdm:linkset bpdm:type="assignments">
                    <bpel:copy>
                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:BatchId</bpel:from>
                        <bpel:to>$BatchTracking/metrics:batchId</bpel:to><mapper:mapperLink><mapper:vertice id="1519806679" targetPath="$BatchTracking/metrics:batchId" targetedBy="2106477635-arg0"></mapper:vertice><mapper:vertice id="2106477635" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:BatchId"></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:EnvironmentId</bpel:from>
                        <bpel:to>$BatchTracking/metrics:environmentId</bpel:to><mapper:mapperLink><mapper:vertice id="806263385" targetPath="$BatchTracking/metrics:environmentId" targetedBy="33505544-arg0"></mapper:vertice><mapper:vertice id="33505544" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:EnvironmentId"></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:ClientId</bpel:from>
                        <bpel:to>$BatchTracking/metrics:clientId</bpel:to><mapper:mapperLink><mapper:vertice id="1051210725" targetPath="$BatchTracking/metrics:clientId" targetedBy="1959736483-arg0"></mapper:vertice><mapper:vertice id="1959736483" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:ClientId"></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:TotalCaseCount</bpel:from>
                        <bpel:to>$BatchTracking/metrics:caseCount</bpel:to><mapper:mapperLink><mapper:vertice id="9399641" targetPath="$BatchTracking/metrics:caseCount" targetedBy="2028163846-arg0"></mapper:vertice><mapper:vertice id="2028163846" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:TotalCaseCount"></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>true()</bpel:from>
                        <bpel:to>$BatchTracking/metrics:batchProcessingBegan</bpel:to><mapper:mapperLink><mapper:vertice id="2138240971" targetPath="$BatchTracking/metrics:batchProcessingBegan" targetedBy="1450921985-arg0"></mapper:vertice><mapper:vertice id="1450921985" dimension="79x24" location="482,179"><mapper:value>true()</mapper:value></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>false()</bpel:from>
                        <bpel:to>$BatchTracking/metrics:BatchProcessingEnded</bpel:to><mapper:mapperLink><mapper:vertice id="1454604009" targetPath="$BatchTracking/metrics:BatchProcessingEnded" targetedBy="1251828218-arg0"></mapper:vertice><mapper:vertice id="1251828218" dimension="79x24" location="475,232"><mapper:value>false()</mapper:value></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>current-dateTime()</bpel:from>
                        <bpel:to>$BatchTracking/metrics:batchProcessingBeganAt</bpel:to><mapper:mapperLink><mapper:vertice id="1164502123" targetPath="$BatchTracking/metrics:batchProcessingBeganAt" targetedBy="219294812-arg0"></mapper:vertice><mapper:vertice id="219294812" dimension="109x24" location="474,277"><mapper:value>current-dateTime()</mapper:value></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                </bpdm:linkset>
            </bpdm:messagingtask>
            <bpel:scope bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Process case" bpdm:ID="_SRGm4M8BEeecbIAlY2LAug">
                <bpdm:linkset bpdm:type="loop" bpdm:loopType="forEach" bpdm:backEdgeParticipantType="none" parallel="no" counterName="lpCaseCounter" bpdm:isBackEdgeContributor="no">
                    <bpel:condition bpdm:loopType="forEachStartCounter">1<mapper:mapperLink><mapper:vertice id="1913295618" targetPath="$Start counter" targetedBy="861109505-arg0"></mapper:vertice><mapper:vertice id="861109505" dimension="79x24" location="314,21"><mapper:value>1</mapper:value></mapper:vertice></mapper:mapperLink></bpel:condition>
                    <bpel:condition bpdm:loopType="forEachFinalCounter">count($case_ManagerRead_case_batchRequest1Msg.body/tns:Cases)<mapper:mapperLink><mapper:vertice id="1608064144" targetPath="$Final counter" targetedBy="234961563-arg1"></mapper:vertice><mapper:vertice id="234961563" dimension="79x24" location="331,71"><mapper:value>count()</mapper:value></mapper:vertice><mapper:vertice id="675213341" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:Cases" targetedBy="234961563-arg0"></mapper:vertice></mapper:mapperLink></bpel:condition>
                </bpdm:linkset>
                <bpel:correlationSets>
                    <bpel:correlationSet name="caseCorrelationSet" properties="this:caseid"/>
                </bpel:correlationSets>
                <bpel:variables xmlns:xvar="http://ode.apache.org/externalVariables">
                    <bpel:variable name="lpCase" element="tns:LaunchpointCase" bpdm:id="_zLi19tHmEeepF8B7W_A3ug">
                        <bpel:from>
                            <bpel:literal bpdm:linkedElement="tns:LaunchpointCase"></bpel:literal>
                        </bpel:from>
                    </bpel:variable>
                    <bpel:variable name="caseExists" type="xs:boolean" bpdm:id="_oyhXMNHnEeepF8B7W_A3ug">
                        <bpel:from>
                            <bpel:literal bpdm:linkedType="xs:boolean"></bpel:literal>
                        </bpel:from>
                    </bpel:variable>
                    <bpel:variable name="LaunchpointCase" element="metrics:LaunchpointCase" xvar:id="LaunchpointCase-_zBcpVtHnEeepF8B7W_A3ug" xvar:relates-to="LaunchpointCase-keys" bpdm:xvarType="metrics:LaunchpointCase" bpdm:id="_zBcpVtHnEeepF8B7W_A3ug"/>
                    <bpel:variable name="case_evaluatorGet_caseRequest1Msg" messageType="CaseEvaluator-process:Get_caseRequest" binding="CaseEvaluator-process:processAndClientServiceBinding" operation="Get_case" opMsgType="0" bpdm:id="_me6fYNHzEeegkeOYmwRRMQ" bpdm:messageIds=" out:_mewuYNHzEeegkeOYmwRRMQ">
                        <bpel:from bpdm:toPart="body">
                            <bpel:literal bpdm:linkedMessageType="CaseEvaluator-process:Get_caseRequest" bpdm:linkedPart="body" bpdm:binding="CaseEvaluator-process:processAndClientServiceBinding" bpdm:opMsgType="0" bpdm:operation="Get_case"></bpel:literal>
                        </bpel:from>
                    </bpel:variable>
                    <bpel:variable name="caseEvaluator-processGet_caseResponse2Msg" messageType="CaseEvaluator-process:Get_caseResponse" binding="CaseEvaluator-process:processAndClientServiceBinding" operation="Get_case" opMsgType="1" bpdm:id="_m3WNhdHzEeegkeOYmwRRMQ" bpdm:messageIds="inc:_m3DSkNHzEeegkeOYmwRRMQ"/>
                </bpel:variables>
                <bpel:sequence>
                    <bpdm:messagingtask eventType="start: empty" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Extract case" bpdm:ID="_GCzeAM8BEeecbIAlY2LAug" bpdm:isHeaderAuthorizationAware="no">
                        <bpdm:linkset bpdm:type="assignments">
                            <bpel:copy>
                                <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:Cases[$lpCaseCounter]</bpel:from>
                                <bpel:to>$lpCase</bpel:to><mapper:mapperLink><mapper:vertice id="60487876" targetPath="$lpCase" targetedBy="1052702523-arg2"></mapper:vertice><mapper:vertice id="1052702523" dimension="79x24" location="351,84"><mapper:value>[]</mapper:value></mapper:vertice><mapper:vertice id="484996015" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:Cases" targetedBy="1052702523-arg0"></mapper:vertice><mapper:vertice id="204233209" sourcePath="$lpCaseCounter" targetedBy="1052702523-arg1"></mapper:vertice></mapper:mapperLink>
                            </bpel:copy>
                        </bpdm:linkset>
                    </bpdm:messagingtask>
                    <bpel:scope bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="check if case exists" bpdm:ID="_jVr7ENHnEeepF8B7W_A3ug">
                        <bpel:variables>
                            <bpel:variable name="thisReceive_resultsRequest1Msg" messageType="this:Receive_resultsRequest" bpdm:id="_k4te9dHlEeepF8B7W_A3ug" bpdm:messageIds="inc:_k4QzANHlEeepF8B7W_A3ug"/>
                            <bpel:variable name="thisReceive_resultsResponse2Msg" messageType="this:Receive_resultsResponse" bpdm:id="_lO6YcNHlEeepF8B7W_A3ug" bpdm:messageIds=" out:_lOxOgNHlEeepF8B7W_A3ug">
                                <bpel:from bpdm:toPart="body">
                                    <bpel:literal bpdm:linkedMessageType="this:Receive_resultsResponse" bpdm:linkedPart="body"></bpel:literal>
                                </bpel:from>
                            </bpel:variable>
                            <bpel:variable name="databaseCheck_if_case_existsRequest1Msg" messageType="CheckCaseExistance-process:Receive_caseRequest" binding="CheckCaseExistance-process:clientAndProcessServiceBinding" operation="Receive_case" opMsgType="0" bpdm:id="_dBgSINHlEeepF8B7W_A3ug" bpdm:messageIds=" out:_dBWhINHlEeepF8B7W_A3ug">
                                <bpel:from bpdm:toPart="body">
                                    <bpel:literal bpdm:linkedMessageType="CheckCaseExistance-process:Receive_caseRequest" bpdm:linkedPart="body" bpdm:binding="CheckCaseExistance-process:clientAndProcessServiceBinding" bpdm:opMsgType="0" bpdm:operation="Receive_case"></bpel:literal>
                                </bpel:from>
                            </bpel:variable>
                            <bpel:variable name="checkCaseExistance-processReceive_caseResponse2Msg" messageType="CheckCaseExistance-process:Receive_caseResponse" binding="CheckCaseExistance-process:clientAndProcessServiceBinding" operation="Receive_case" opMsgType="1" bpdm:id="_dhPiINHlEeepF8B7W_A3ug" bpdm:messageIds="inc:_dgpFMNHlEeepF8B7W_A3ug"/>
                        </bpel:variables>
                        <bpel:sequence>
                            <bpdm:messagingtask operation="Receive_case" partnerLink="case_ManagerAndDatabaseForCanonicPortPlkVar" portType="CheckCaseExistance-process:Forclient" isMyRole="false" enableSharing="false" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Check case exists" bpdm:ID="_Hg07MM8BEeecbIAlY2LAug" bpdm:isHeaderAuthorizationAware="no">
                                <bpdm:linkset bpdm:type="assignments">
                                    <bpel:copy>
                                        <bpel:from>$lpCase/tns:CaseId</bpel:from>
                                        <bpel:to>$databaseCheck_if_case_existsRequest1Msg.body</bpel:to><mapper:mapperLink><mapper:vertice id="23109167" targetPath="$databaseCheck_if_case_existsRequest1Msg.body" targetedBy="2046700477-arg0"></mapper:vertice><mapper:vertice id="2046700477" sourcePath="$lpCase/tns:CaseId"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                </bpdm:linkset>
                                <bpdm:linkset bpdm:type="outgoingMessage" bpdm:bpeltype="invoke-request" bpdm:messageVariable="databaseCheck_if_case_existsRequest1Msg" bpdm:msgVarScopeId="_jVr7ENHnEeepF8B7W_A3ug" bpdm:variableIsManaged="true" bpdm:messageType="CheckCaseExistance-process:Receive_caseRequest" bpdm:binding="CheckCaseExistance-process:clientAndProcessServiceBinding" bpdm:isHeaderAuthorizationAware="no" bpdm:ID="_dBWhINHlEeepF8B7W_A3ug">
                                    <bpel:correlation set="caseCorrelationSet" initiate="join" pattern="request" bpdm:isSource="false"></bpel:correlation>
                                </bpdm:linkset>
                                <bpdm:linkset bpdm:type="incomingMessage" bpdm:bpeltype="invoke-receive" bpdm:messageVariable="checkCaseExistance-processReceive_caseResponse2Msg" bpdm:msgVarScopeId="_jVr7ENHnEeepF8B7W_A3ug" bpdm:variableIsManaged="true" bpdm:messageType="CheckCaseExistance-process:Receive_caseResponse" bpdm:binding="CheckCaseExistance-process:clientAndProcessServiceBinding" bpdm:isHeaderAuthorizationAware="no" bpdm:ID="_dgpFMNHlEeepF8B7W_A3ug"></bpdm:linkset>
                            </bpdm:messagingtask>
                            <bpdm:messagingtask operation="Receive_results" partnerLink="case_ManagerAndDatabaseForCanonicPortPlkVar" portType="this:ForDatabase" isMyRole="true" enableSharing="false" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Receive results" bpdm:ID="_jjoiYNHlEeepF8B7W_A3ug" bpdm:isHeaderAuthorizationAware="yes">
                                <bpdm:linkset bpdm:type="incomingMessage" bpdm:bpeltype="receive" bpdm:messageVariable="thisReceive_resultsRequest1Msg" bpdm:msgVarScopeId="_jVr7ENHnEeepF8B7W_A3ug" bpdm:variableIsManaged="true" bpdm:messageType="this:Receive_resultsRequest" bpdm:isHeaderAuthorizationAware="yes" bpdm:ID="_k4QzANHlEeepF8B7W_A3ug">
                                    <bpel:correlation set="caseCorrelationSet" initiate="join" pattern="response" bpdm:isSource="false"></bpel:correlation>
                                </bpdm:linkset>
                                <bpdm:linkset bpdm:type="assignments">
                                    <bpel:copy>
                                        <bpel:from>$ode:pid</bpel:from>
                                        <bpel:to>$thisReceive_resultsResponse2Msg.body/tns:pid</bpel:to><mapper:mapperLink><mapper:vertice id="1322985757" targetPath="$thisReceive_resultsResponse2Msg.body/tns:pid" targetedBy="1750423311-arg0"></mapper:vertice><mapper:vertice id="1750423311" sourcePath="$ode:pid"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                    <bpel:copy>
                                        <bpel:from>current-dateTime()</bpel:from>
                                        <bpel:to>$thisReceive_resultsResponse2Msg.body/tns:timestamp</bpel:to><mapper:mapperLink><mapper:vertice id="782314474" targetPath="$thisReceive_resultsResponse2Msg.body/tns:timestamp" targetedBy="273725720-arg0"></mapper:vertice><mapper:vertice id="273725720" dimension="109x24" location="326,91"><mapper:value>current-dateTime()</mapper:value></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                </bpdm:linkset>
                                <bpdm:linkset bpdm:type="outgoingMessage" bpdm:bpeltype="reply" bpdm:messageVariable="thisReceive_resultsResponse2Msg" bpdm:msgVarScopeId="_jVr7ENHnEeepF8B7W_A3ug" bpdm:variableIsManaged="true" bpdm:messageType="this:Receive_resultsResponse" bpdm:isHeaderAuthorizationAware="yes" bpdm:ID="_lOxOgNHlEeepF8B7W_A3ug"></bpdm:linkset>
                            </bpdm:messagingtask>
                            <bpdm:messagingtask eventType="end: empty" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Empty_End_Event" bpdm:ID="_nKg3kNHnEeepF8B7W_A3ug" bpdm:isHeaderAuthorizationAware="no">
                                <bpdm:linkset bpdm:type="assignments">
                                    <bpel:copy>
                                        <bpel:from>$thisReceive_resultsRequest1Msg.body/tns:exists</bpel:from>
                                        <bpel:to>$caseExists</bpel:to><mapper:mapperLink><mapper:vertice id="1380179502" targetPath="$caseExists" targetedBy="325834034-arg0"></mapper:vertice><mapper:vertice id="325834034" sourcePath="$thisReceive_resultsRequest1Msg.body/tns:exists"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                </bpdm:linkset>
                            </bpdm:messagingtask>
                        </bpel:sequence>
                    </bpel:scope>
                    <bpdm:gateway bpdm:label="Case exists?" bpdm:ID="_KScHMM8BEeecbIAlY2LAug" bpdm:gatewayType="data_xor" bpdm:isMerge="false">
                        <bpdm:linkset bpdm:type="case" bpdm:default="false" bpdm:ID="_L0fv0M8BEeecbIAlY2LAug" bpdm:targetDisplayName="[Case exists? - Register case]">
                            <bpel:condition>false() = $caseExists<mapper:mapperLink><mapper:vertice id="629648159" targetPath="$condition" targetedBy="413209801-arg1"></mapper:vertice><mapper:vertice id="413209801" dimension="79x24" location="228,68"><mapper:value>=</mapper:value></mapper:vertice><mapper:vertice id="106207652" dimension="79x24" location="114,40" targetedBy="413209801-arg0"><mapper:value>false()</mapper:value></mapper:vertice><mapper:vertice id="1478904485" sourcePath="$caseExists" targetedBy="413209801-arg2"></mapper:vertice></mapper:mapperLink></bpel:condition>
                        </bpdm:linkset>
                        <bpdm:linkset bpdm:type="case" bpdm:default="true" bpdm:ID="_PbnAcM8BEeecbIAlY2LAug" bpdm:targetDisplayName="default"></bpdm:linkset>
                        <bpel:sequence>
                            <bpdm:messagingtask bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Register case" bpdm:ID="_L0XM8M8BEeecbIAlY2LAug" bpdm:isHeaderAuthorizationAware="no">
                                <bpdm:linkset bpdm:type="assignments">
                                    <bpel:copy>
                                        <bpel:from>$lpCase/tns:CaseId</bpel:from>
                                        <bpel:to>$LaunchpointCase/metrics:CaseId</bpel:to><mapper:mapperLink><mapper:vertice id="1951940233" targetPath="$LaunchpointCase/metrics:CaseId" targetedBy="96058865-arg0"></mapper:vertice><mapper:vertice id="96058865" sourcePath="$lpCase/tns:CaseId"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                    <bpel:copy>
                                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:EnvironmentId</bpel:from>
                                        <bpel:to>$LaunchpointCase/metrics:environmentid</bpel:to><mapper:mapperLink><mapper:vertice id="320087890" targetPath="$LaunchpointCase/metrics:environmentid" targetedBy="882309440-arg0"></mapper:vertice><mapper:vertice id="882309440" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:EnvironmentId"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                    <bpel:copy>
                                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:ClientId</bpel:from>
                                        <bpel:to>$LaunchpointCase/metrics:ClientId</bpel:to><mapper:mapperLink><mapper:vertice id="764932385" targetPath="$LaunchpointCase/metrics:ClientId" targetedBy="1084957199-arg0"></mapper:vertice><mapper:vertice id="1084957199" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:ClientId"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                </bpdm:linkset>
                            </bpdm:messagingtask>
                            <bpdm:messagingtask eventType="end: message" operation="Get_case" partnerLink="case_ManagerAndCase_evaluatorForCanonicPortPlkVar" portType="CaseEvaluator-process:Forclient" isMyRole="false" enableSharing="false" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Send case for evaluatiorn" bpdm:ID="_lRSOoNHzEeegkeOYmwRRMQ" bpdm:isHeaderAuthorizationAware="no">
                                <bpdm:linkset bpdm:type="assignments">
                                    <bpel:copy>
                                        <bpel:from>$lpCase/tns:CaseId</bpel:from>
                                        <bpel:to>$case_evaluatorGet_caseRequest1Msg.body</bpel:to><mapper:mapperLink><mapper:vertice id="1855245284" targetPath="$case_evaluatorGet_caseRequest1Msg.body" targetedBy="372847965-arg0"></mapper:vertice><mapper:vertice id="372847965" sourcePath="$lpCase/tns:CaseId"></mapper:vertice></mapper:mapperLink>
                                    </bpel:copy>
                                </bpdm:linkset>
                                <bpdm:linkset bpdm:type="outgoingMessage" bpdm:bpeltype="invoke-request" bpdm:messageVariable="case_evaluatorGet_caseRequest1Msg" bpdm:msgVarScopeId="_SRGm4M8BEeecbIAlY2LAug" bpdm:variableIsManaged="true" bpdm:messageType="CaseEvaluator-process:Get_caseRequest" bpdm:binding="CaseEvaluator-process:processAndClientServiceBinding" bpdm:isHeaderAuthorizationAware="no" bpdm:ID="_mewuYNHzEeegkeOYmwRRMQ"></bpdm:linkset>
                                <bpdm:linkset bpdm:type="incomingMessage" bpdm:bpeltype="invoke-receive" bpdm:messageVariable="caseEvaluator-processGet_caseResponse2Msg" bpdm:msgVarScopeId="_SRGm4M8BEeecbIAlY2LAug" bpdm:variableIsManaged="true" bpdm:messageType="CaseEvaluator-process:Get_caseResponse" bpdm:binding="CaseEvaluator-process:processAndClientServiceBinding" bpdm:isHeaderAuthorizationAware="no" bpdm:ID="_m3DSkNHzEeegkeOYmwRRMQ"></bpdm:linkset>
                            </bpdm:messagingtask>
                        </bpel:sequence>
                        <bpel:sequence>
                            <bpdm:messagingtask eventType="end: empty" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Ignore case" bpdm:ID="_PbedkM8BEeecbIAlY2LAug" bpdm:isHeaderAuthorizationAware="no"></bpdm:messagingtask>
                        </bpel:sequence>
                    </bpdm:gateway>
                </bpel:sequence>
            </bpel:scope>
            <bpdm:messagingtask eventType="end: empty" bpdm:backEdgeId="" bpdm:backEdgeParticipantType="none" bpdm:backEdgeParticipantTarget="none" bpdm:label="Empty_End_Event" bpdm:ID="_Md9zANLEEee0svt489vHig" bpdm:isHeaderAuthorizationAware="no">
                <bpdm:linkset bpdm:type="assignments">
                    <bpel:copy>
                        <bpel:from>$case_ManagerRead_case_batchRequest1Msg.body/tns:BatchId</bpel:from>
                        <bpel:to>$BatchTracking/metrics:batchId</bpel:to><mapper:mapperLink><mapper:vertice id="1995153217" targetPath="$BatchTracking/metrics:batchId" targetedBy="419584204-arg0"></mapper:vertice><mapper:vertice id="419584204" sourcePath="$case_ManagerRead_case_batchRequest1Msg.body/tns:BatchId"></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>true()</bpel:from>
                        <bpel:to>$BatchTracking/metrics:BatchProcessingEnded</bpel:to><mapper:mapperLink><mapper:vertice id="766496284" targetPath="$BatchTracking/metrics:BatchProcessingEnded" targetedBy="755260123-arg0"></mapper:vertice><mapper:vertice id="755260123" dimension="79x24" location="393,156"><mapper:value>true()</mapper:value></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                    <bpel:copy>
                        <bpel:from>current-dateTime()</bpel:from>
                        <bpel:to>$BatchTracking/metrics:batchProcessingEndedAt</bpel:to><mapper:mapperLink><mapper:vertice id="685340304" targetPath="$BatchTracking/metrics:batchProcessingEndedAt" targetedBy="1033007477-arg0"></mapper:vertice><mapper:vertice id="1033007477" dimension="109x24" location="397,214"><mapper:value>current-dateTime()</mapper:value></mapper:vertice></mapper:mapperLink>
                    </bpel:copy>
                </bpdm:linkset>
            </bpdm:messagingtask>
        </bpel:sequence>
    </bpel:scope>
</bpel:process>